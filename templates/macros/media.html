{% macro picture(img, widths, class="", attrs="") %}
  <img
    srcset="{% for w in widths -%}
      {{ resize_image(path=img, width=w, op='fit_width') }} {{ w }}w
      {%- if not loop.last %}, {% endif -%}
      {%- endfor %}"
    src="{{ resize_image(path=img, width=widths | last, op='fit_width') }}"
    {% if class != "" %}class="{{ class | safe }}"{% endif %}
    {% if attrs != "" %}{{ attrs | safe }}{% endif %}
  >
{% endmacro picture %}
